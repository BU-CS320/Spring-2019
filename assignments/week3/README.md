# HW2 Due 2/12
## Analytical Part
Analytical part available [@331](https://piazza.com/class/jr9fgrf7efv7j0?cid=331)

WS, Sat 2/9 9:30am:  A line at the bottom of problem two was cut off, I have uploaded a new version to the web site. 

WS, Sun 2/10 11:50am: There was a typo in Problem One a4, fixed online now.  Look at the video hints, where I actually
solve this part of the problem:  https://www.youtube.com/watch?v=B1VB2GDGmuM

## Code Part
Code part is now due on 2/13 [@457](https://piazza.com/class/jr9fgrf7efv7j0?cid=457)
### Instructions
* To get the assignment run ```git pull upstream master``` in your homework directory
* `cd` into the `week3` directory, run `cabal new-repl`
* Fill in the bodies of the undefined functions and data
* DO NOT CHANGE THE TYPE SIGNATURES!

### Notes
* There was a typo in the type signature of `keepEvens` it should read `keepEvens :: List Integer ->  List Integer`.  We have not changed the source file to make merge conflicts easier.  We do not plan on grading the question but encourage you to try it as practice. [@282](https://piazza.com/class/jr9fgrf7efv7j0?cid=282)
* You need to install `tasty-quickcheck` to run the test cases.
* If your test times out, you need to close and reopen your terminal to do further testing.
* For fib, you might need to find a efficient definition, 
otherwise the tests may timeout.
* For the `zip` function match as mainy pairs as possible, you may stop when either list is empty [@299](https://piazza.com/class/jr9fgrf7efv7j0?cid=299)
* Make sure your editor uses spaces instead of tabs, or you will likely get annoying parse errors.
* We have not finished releasing test code yet
* You may always add your own helper functions and helper data!

#### 9:05 lab
The gcd implementation we went over may have had a small bug.  Make sure your function is defined in the conventional way so `gcd 0 x = 1` and `gcd x 0 = 1`

#### How to Read Error Message Of Tests
Our tests are now random tests generated by a Haskell framework [QuickCheck](https://hackage.haskell.org/package/QuickCheck).
We tests certain properties of your program, here are some example properties:
- For all integer m and n, gcd of m n should be divisible by both m and n
- When you create a CsStudent using mkCsStudent, that student should be a CS student (isCs)
- When you sort your list, the length of your lists should stay the same.

Here is a sample error message produced by QuickCheck:
```
tests for fib function
    forall n, fib n + fib (n+1) = fib (n+2):                  OK
    +++ OK, passed 20 tests; 26 discarded.
tests for gcd function
    forall m n larger than 0, gcd of m n is divisible by both n and m: FAIL
    *** Failed! Exception: 'divide by zero' (after 1 test and 4 shrinks):
    2
    3
    Use --quickcheck-replay=987365 --quickcheck-max-size=50 to reproduce.
    forall m n larger than 0, gcd of m n is larger or equal to all the common factor of m and n: FAIL
    *** Failed! Falsifiable (after 1 test):
    1
    2
    Use --quickcheck-replay=217568 --quickcheck-max-size=50 to reproduce.
```
In this case the test for `fib` passes and both of the tests for `gcd` failed.

In the first log message you can see the property we are testing, for example:
"forall m n larger than 0, gcd of m n is divisible by both n and m".
And after the message `Failed!`, you will see the reason of the failure: `Exception: 'divide by zero'` and two numbers `2` and `3`,
they are respectively the value of `m` and `n` in the message.

If you plug in `2` to `m` and `3` to `n`, 
you will find that your `gcd m n` will encounter a `division by zero` error when you run your `gcd m n`.

In the second error message you will see `Falsifiable`,
this means when your plug in `1` to `m` and `2` to `n`,
the second property, namely "gcd of m n is larger or equal to all the common factor of m and n", doesn't hold.

#### Replay Your Test Cases

You probably never need to replay your tests,
but in the rare case that you have to replay your tests,
you can follow these steps:

On the last line of each failed test case, you will see a seed: `--quickcheck-replay=<seed>`.
To replay again, set a temp environment variable in your shell called `TASTY_QUICKCHECK_REPLAY` to the value of seed.
In the example, the first failed test have seed `987365`, and the second have seed `217568`.

Here are some ways to set temp environment variable in your shell:
- PowerShell: `$env:TASTY_QUICKCHECK_REPLAY = 217568` (You really shouldn't use CMD anymore)
- Bash & Zsh: `export TASTY_QUICKCHECK_REPLAY=217568` (Bash sucks too, just saying)
- Fish: `set --export TASTY_QUICKCHECK_REPLAY 217568`

These variable will removed once you close your shell.
**We do NOT recommend you to run your tests in the same seed over and over again**.



### Submit (similar to [week1](../week1))
1. run the tests by running ```cabal new-test``` 
1. run ```git status``` to make sure git is ok
1. run ```git commit -a -m "whoo hoo I'm done with HW"``` to make a commit to your laptop
1. run ```git pull upstream master``` to get the latest tests
1. run the tests by running ```cabal new-test``` 
1. run ```git push``` to submit your commit to your private gitHub acount
1. check that you can see your solutions on the website for your private repo

### REPL hints
* `:load` or `:l` will change the module you are inspecting
* `:reload` or `:r` will reload the file.  Do this often!
* `:type` or `:t` will tell you the type of an expression
* `:quit` or `:q` will leave the repl

### ```git``` issues
If you are having ```git``` issues, run ```git status``` and post on piazza for help.

## Further Reading
* Read about Haskell modules: https://www.haskell.org/tutorial/modules.html
* [Null References: The Billion Dollar Mistake](https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare)
